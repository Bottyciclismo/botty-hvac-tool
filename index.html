<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BOTTY TECH SUITE ‚Äì LAB PRO</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
.bar-container{
background:#1b263b;
height:12px;
border-radius:10px;
margin-bottom:20px;
overflow:hidden;
}

.bar{
height:100%;
width:0%;
background:#4cc9f0;
transition:0.4s;
}

canvas{
margin-top:20px;
margin-bottom:20px;
}

body{
background:linear-gradient(135deg,#0f1c2b,#1f3c55);
font-family:Segoe UI;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
color:white;
margin:0;
}

.container{
background:linear-gradient(145deg,#3f4f5f,#2f3e4c);
padding:35px;
border-radius:28px;
width:95%;
max-width:650px;
box-shadow:
inset 0 0 30px rgba(0,0,0,0.6),
0 25px 60px rgba(0,0,0,0.8);
border:3px solid #5c6f80;
}

h2{
text-align:center;
color:#00e0ff;
margin-bottom:25px;
}

.menu{
display:flex;
gap:10px;
margin-bottom:20px;
}

.menu button{
flex:1;
padding:12px;
border:none;
border-radius:12px;
background:#142c3a;
color:#00eaff;
cursor:pointer;
font-weight:bold;
}

.menu button:hover{
background:#00eaff;
color:#00222b;
}

.module{ display:none; }
.module.active{ display:block; }

.display{
background:linear-gradient(180deg,#0a1f2e,#071923);
color:#00eaff;
font-size:32px;
padding:18px;
border-radius:14px;
text-align:right;
margin-bottom:20px;
font-weight:bold;
font-family:monospace;
box-shadow:
inset 0 0 20px #000,
0 0 20px rgba(0,234,255,0.25);
border:2px solid #12384a;
}

input,select{
width:100%;
padding:10px;
margin:8px 0;
border-radius:10px;
border:2px solid #1e3a4a;
background:#142c3a;
color:#e6f7ff;
}

button.calc{
width:100%;
padding:14px;
margin-top:15px;
border:none;
border-radius:12px;
background:linear-gradient(180deg,#00eaff,#00bcd4);
color:#00222b;
font-weight:bold;
cursor:pointer;
}

.result{
background:linear-gradient(180deg,#071923,#04121a);
padding:15px;
margin-top:15px;
border-radius:12px;
font-family:monospace;
border:2px solid #12384a;
}

.led-row{
display:flex;
align-items:center;
gap:10px;
margin:10px 0 15px 0;
}

.led{
width:16px;
height:16px;
border-radius:50%;
background:#222;
}

.led.blue{ background:#00eaff; box-shadow:0 0 10px #00eaff; }
.led.green{ background:#00ff9c; box-shadow:0 0 10px #00ff9c; }
.led.red{ background:#ff4d6d; box-shadow:0 0 10px #ff4d6d; }

</style>
</head>

<body>

<div class="container">

<h2>BOTTY TECH SUITE ‚öôÔ∏è LAB PRO</h2>

<div class="menu">
<button onclick="mostrar('sondas')">‚ùÑÔ∏è SONDAS</button>
<button onclick="mostrar('compresor')">üí® COMPRESOR</button>
<button onclick="mostrar('electrico')">‚ö° EL√âCTRICO</button>
</div>

<!-- ================= SONDAS ================= -->
<div id="sondas" class="module active">

<div class="display" id="display">0.00 ¬∞C</div>

<div class="bar-container">
  <div class="bar" id="bar"></div>
</div>

<canvas id="grafica"></canvas>

<label>Simulaci√≥n Temperatura (Modo Formaci√≥n)</label>
<input type="range" id="simTemp" min="-20" max="100" value="25" step="1">

<label>Tipo de Sonda</label>
<select id="tipo">
  <option value="NTC_1000">NTC 1K</option>
  <option value="NTC_10000">NTC 10K</option>
  <option value="NTC_25000">NTC 25K</option>
  <option value="PTC_1000">PTC 1K</option>
  <option value="PTC_10000">PTC 10K</option>
  <option value="PTC_25000">PTC 25K</option>
</select>

<label>Resistencia medida (Œ©)</label>
<input type="number" id="resistencia" placeholder="Ej: 589">

<label>Beta (solo NTC - default 3435)</label>
<input type="number" id="beta" value="3435">

<button class="calc" onclick="calcular()">MEDIR</button>

<hr style="margin:20px 0;border-color:#12384a;">

<label>Temperatura para calcular Resistencia (¬∞C)</label>
<input type="number" id="tempInversa">

<button class="calc" onclick="calcularInversa()">CALCULAR Œ©</button>

<div id="resultadoInverso" class="result"></div>
<div id="sugerencia" class="result"></div>

</div>


<!-- ================= COMPRESOR ================= -->
<div id="compresor" class="module">

<div class="display" id="displayComp">0 L/min</div>

<input type="number" id="volumen" placeholder="Volumen tanque (L)">
<input type="number" id="presion" placeholder="Presi√≥n final (bar)">
<input type="number" id="tiempo" placeholder="Tiempo (segundos)">

<button class="calc" onclick="calcularCompresor()">CALCULAR</button>

<div class="result" id="resultadoComp"></div>

</div>

<!-- ================= ELECTRICO ================= -->
<div id="electrico" class="module">

<div class="display" id="displayElec">0.0 A</div>

<input type="number" id="kw" placeholder="Potencia (kW)">
<input type="number" id="amps" placeholder="Intensidad placa (A)">
<input type="number" id="longitud" placeholder="Longitud l√≠nea (m)">

<select id="instalacion">
<option value="B1">B1 ‚Äì Empotrado</option>
<option value="B2">B2 ‚Äì Superficial</option>
<option value="C">C ‚Äì Bandeja</option>
<option value="D">D ‚Äì Enterrado</option>
</select>

<button class="calc" onclick="calcularElectrico()">CALCULAR</button>

<div class="led-row">
<div id="led" class="led"></div>
<div id="ledText">Esperando c√°lculo...</div>
</div>

<div class="result" id="resultadoElec"></div>

</div>

</div>

<script>

function mostrar(id){
document.querySelectorAll('.module').forEach(m=>m.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

// ---------- SONDAS ----------
function calcularSonda(){
let R=parseFloat(document.getElementById("resistencia").value);
let beta=parseFloat(document.getElementById("beta").value);
let R0=parseFloat(document.getElementById("tipoSonda").value);
if(!R) return;

let T0=298.15;
let tempK=1/((1/T0)+(1/beta)*Math.log(R/R0));
let tempC=tempK-273.15;

document.getElementById("displaySonda").innerHTML=tempC.toFixed(2)+" ¬∞C";
document.getElementById("resultadoSonda").innerHTML=
"Temperatura estimada: "+tempC.toFixed(2)+" ¬∞C";
}

// ---------- COMPRESOR ----------
function calcularCompresor(){

let V=parseFloat(document.getElementById("volumen").value);
let P=parseFloat(document.getElementById("presion").value);
let t=parseFloat(document.getElementById("tiempo").value);

if(!V||!P||!t) return;

let tMin=t/60;

// Caudal en L/min
let caudal=(V*P)/tMin;

// m¬≥/h
let m3h=(caudal/1000)*60;

// CV reales seg√∫n tu cat√°logo (92 L/min por CV)
let CV=caudal/92;

// kW aproximados
let kW=CV*0.736;

document.getElementById("displayComp").innerHTML=
caudal.toFixed(0)+" L/min";

document.getElementById("resultadoComp").innerHTML=
"Producci√≥n: "+caudal.toFixed(0)+" L/min<br>"+
m3h.toFixed(1)+" m¬≥/h<br><br>"+
"Motor estimado:<br>"+
CV.toFixed(1)+" CV<br>"+
kW.toFixed(2)+" kW";
}


// ---------- ELECTRICO ----------
function calcularElectrico(){

let kw=parseFloat(document.getElementById("kw").value);
let amps=parseFloat(document.getElementById("amps").value);
let L=parseFloat(document.getElementById("longitud").value);
let arranque=document.getElementById("arranque").value;
let instalacion=document.getElementById("instalacion").value;

if(!L) return;

let I;

if(amps){
I=amps;
}
else if(kw){
I=kw*1000/(Math.sqrt(3)*400*0.85*0.9);
}
else{
return;
}

// Tabla t√©cnica
let cables=[
{sec:2.5, Iz:{B1:18,B2:21,C:24,D:20}, R:0.00741},
{sec:4, Iz:{B1:24,B2:28,C:32,D:26}, R:0.00461},
{sec:6, Iz:{B1:31,B2:36,C:41,D:34}, R:0.00308},
{sec:10, Iz:{B1:46,B2:50,C:57,D:52}, R:0.00183},
{sec:16, Iz:{B1:61,B2:70,C:76,D:67}, R:0.00115},
{sec:25, Iz:{B1:80,B2:95,C:101,D:89}, R:0.000727},
{sec:35, Iz:{B1:99,B2:115,C:125,D:110}, R:0.000524},
{sec:50, Iz:{B1:125,B2:150,C:160,D:140}, R:0.000387}
];

let seleccion=null;
let caidaFinal=0;

for(let c of cables){

if(I <= c.Iz[instalacion]){

let deltaV=Math.sqrt(3)*I*L*c.R;
let porcentaje=(deltaV/400)*100;

if(porcentaje <= 5){
seleccion=c;
caidaFinal=porcentaje;
break;
}
}
}

if(!seleccion){
document.getElementById("displayElec").innerHTML=
I.toFixed(1)+" A";

document.getElementById("resultadoElec").innerHTML=
"<strong>Secci√≥n:</strong> "+seleccion.sec+" mm¬≤<br>"+
"Intensidad admisible ("+instalacion+"): "+seleccion.Iz[instalacion]+" A<br>"+
"<strong>Ca√≠da tensi√≥n:</strong> "+caidaFinal.toFixed(2)+" %<br><br>"+
"<strong>Magnetot√©rmico:</strong> "+magneto+" A curva D";

"<span style='color:#ff4d6d;'>‚ö† Necesaria secci√≥n superior a 50 mm¬≤</span>";
return;
}

// Magnetot√©rmico
let magneto=Math.ceil(I*1.25/5)*5;

// -------- LED ca√≠da tensi√≥n --------
let ledColor="";
let ledTexto="";
let led = document.getElementById("led");
let ledText = document.getElementById("ledText");

led.className = "led"; // reset
ledText.innerHTML = ledTexto;

if(caidaFinal < 3){
led.classList.add("blue");
}
else if(caidaFinal <= 5){
led.classList.add("green");
}
else{
led.classList.add("red");
}


if(caidaFinal < 3){
ledColor="#00b4ff";
ledTexto="üîµ LED azul = correcto (<3% ca√≠da)";
}
else if(caidaFinal <=5){
ledColor="#00ff66";
ledTexto="üü¢ LED verde = aceptable (3-5%)";
}
else{
ledColor="#ff4d4d";
ledTexto="üî¥ LED rojo = fuera de norma (>5%)";
}

document.getElementById("displayElectrico").innerHTML=
I.toFixed(1)+" A";

document.getElementById("resultadoElectrico").innerHTML=
"<strong>Secci√≥n:</strong> "+seleccion.sec+" mm¬≤<br>"+
"Intensidad admisible ("+instalacion+"): "+seleccion.Iz[instalacion]+" A<br>"+
"<strong>Ca√≠da tensi√≥n:</strong> "+caidaFinal.toFixed(2)+" %<br>"+
"<span style='color:"+ledColor+"; font-weight:bold;'>"+ledTexto+"</span><br><br>"+
"<strong>Magnetot√©rmico:</strong> "+magneto+" A curva D";
}

let chart;

function calcNTC(R, R0, beta){
let T0=298.15;
let tempK=1/((1/T0)+(1/beta)*Math.log(R/R0));
return tempK-273.15;
}

function calcPTC(R,R0){
let alpha=0.00385;
return (R-R0)/(R0*alpha);
}

function actualizarDisplay(tempC){

let display=document.getElementById("display");
let bar=document.getElementById("bar");

display.innerHTML=tempC.toFixed(2)+" ¬∞C";

let porcentaje=((tempC+20)/120)*100;
porcentaje=Math.max(0,Math.min(100,porcentaje));
bar.style.width=porcentaje+"%";

if(tempC<2){
display.style.color="#00b4d8";
bar.style.background="#00b4d8";
}
else if(tempC<=45){
display.style.color="#4cc9f0";
bar.style.background="#4cc9f0";
}
else{
display.style.color="#ff6b6b";
bar.style.background="#ff6b6b";
}
}

function generarGrafica(tipo,beta,tempActual){

let R0=parseInt(tipo.split("_")[1]);
let temps=[];
let resistencias=[];

for(let t=-20;t<=100;t++){
let R;
if(tipo.includes("NTC")){
let T0=298.15;
let Tk=t+273.15;
R=R0*Math.exp(beta*(1/Tk-1/T0));
}
else{
let alpha=0.00385;
R=R0*(1+alpha*t);
}
temps.push(t);
resistencias.push(R);
}

if(chart) chart.destroy();

chart=new Chart(document.getElementById("grafica"),{
type:"line",
data:{
datasets:[
{
label:"Curva",
data:temps.map((t,i)=>({x:t,y:resistencias[i]})),
borderColor:"#4cc9f0",
borderWidth:2,
fill:false,
parsing:false
},
{
label:"Medici√≥n",
data:[{x:tempActual,y:resistencias[Math.round(tempActual)+20]}],
backgroundColor:"#ff6b6b",
borderColor:"#ff6b6b",
pointRadius:6,
showLine:false,
parsing:false
}
]
},
options:{
responsive:true,
plugins:{legend:{labels:{color:"white"}}},
scales:{
x:{type:"linear",min:-20,max:100,ticks:{color:"white"}},
y:{ticks:{color:"white"}}
}
}
});
}

function calcular(){

let tipo=document.getElementById("tipo").value;
let R=parseFloat(document.getElementById("resistencia").value);
let beta=parseFloat(document.getElementById("beta").value);
let sugerenciaDiv=document.getElementById("sugerencia");

if(!R||R<=0) return;

let R0=parseInt(tipo.split("_")[1]);
let tempC;

if(tipo.includes("NTC")){
tempC=calcNTC(R,R0,beta);
}
else{
tempC=calcPTC(R,R0);
}

actualizarDisplay(tempC);
generarGrafica(tipo,beta,tempC);

// Sugerencia autom√°tica solo NTC
let opciones=["NTC_1000","NTC_10000","NTC_25000"];
let mejorOpcion=tipo;
let menorDif=Infinity;

for(let op of opciones){
let R0test=parseInt(op.split("_")[1]);
let tTest=calcNTC(R,R0test,beta);
if(tTest>-40&&tTest<120){
let dif=Math.abs(tTest-25);
if(dif<menorDif){
menorDif=dif;
mejorOpcion=op;
}
}
}

if(mejorOpcion!==tipo){
sugerenciaDiv.innerHTML=
"üîé Sugerencia: encaja mejor con "+mejorOpcion.replace("_"," ");
}
else{
sugerenciaDiv.innerHTML="";
}
}

function calcularInversa(){

let tipo=document.getElementById("tipo").value;
let temp=parseFloat(document.getElementById("tempInversa").value);
let beta=parseFloat(document.getElementById("beta").value);
let resultado=document.getElementById("resultadoInverso");

if(isNaN(temp)) return;

let R0=parseInt(tipo.split("_")[1]);
let resistencia;

if(tipo.includes("NTC")){
let T0=298.15;
let Tk=temp+273.15;
resistencia=R0*Math.exp(beta*(1/Tk-1/T0));
}
else{
let alpha=0.00385;
resistencia=R0*(1+alpha*temp);
}

resultado.innerHTML=
"Resistencia estimada: "+resistencia.toFixed(2)+" Œ©";
}

document.getElementById("simTemp").addEventListener("input",function(){
let tipo=document.getElementById("tipo").value;
let beta=parseFloat(document.getElementById("beta").value);
let t=parseFloat(this.value);
actualizarDisplay(t);
generarGrafica(tipo,beta,t);
});

</script>

</body>
</html>







